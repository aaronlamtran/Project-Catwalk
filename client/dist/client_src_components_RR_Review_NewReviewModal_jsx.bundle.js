"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfec"] = self["webpackChunkfec"] || []).push([["client_src_components_RR_Review_NewReviewModal_jsx"],{

/***/ "./client/src/components/RR/Review/NewReviewModal.jsx":
/*!************************************************************!*\
  !*** ./client/src/components/RR/Review/NewReviewModal.jsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\nvar ReviewStarRating = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.lazy)(function () {\n  return __webpack_require__.e(/*! import() */ \"client_src_components_RR_Review_ReviewStarRating_jsx\").then(__webpack_require__.bind(__webpack_require__, /*! ./ReviewStarRating */ \"./client/src/components/RR/Review/ReviewStarRating.jsx\"));\n});\nvar ReviewCharacteristics = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.lazy)(function () {\n  return __webpack_require__.e(/*! import() */ \"client_src_components_RR_Review_ReviewCharacteristics_jsx\").then(__webpack_require__.bind(__webpack_require__, /*! ./ReviewCharacteristics */ \"./client/src/components/RR/Review/ReviewCharacteristics.jsx\"));\n});\nvar PhotoUpload = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.lazy)(function () {\n  return __webpack_require__.e(/*! import() */ \"client_src_components_RR_Review_PhotoUpload_jsx\").then(__webpack_require__.bind(__webpack_require__, /*! ./PhotoUpload */ \"./client/src/components/RR/Review/PhotoUpload.jsx\"));\n});\nvar starSelections = {\n  1: 'Poor',\n  2: 'Fair',\n  3: 'Average',\n  4: 'Good',\n  5: 'Great'\n};\n\nvar CreateReviewModal = function CreateReviewModal(props) {\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modal = _useState2[0],\n      setModal = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      productName = _useState4[0],\n      setProductName = _useState4[1];\n\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      charCount = _useState6[0],\n      setCharCount = _useState6[1]; // Elements in form\n\n\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      overallRating = _useState8[0],\n      setOverallRating = _useState8[1];\n\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isRecommended = _useState10[0],\n      setIsRecommended = _useState10[1]; // Elements in product experience section\n\n\n  var _useState11 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      sizeRating = _useState12[0],\n      setSizeRating = _useState12[1];\n\n  var _useState13 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      widthRating = _useState14[0],\n      setWidthRating = _useState14[1];\n\n  var _useState15 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      comfortRating = _useState16[0],\n      setComfortRating = _useState16[1];\n\n  var _useState17 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState18 = _slicedToArray(_useState17, 2),\n      qualityRating = _useState18[0],\n      setQualityRating = _useState18[1];\n\n  var _useState19 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState20 = _slicedToArray(_useState19, 2),\n      lengthRating = _useState20[0],\n      setLengthRating = _useState20[1];\n\n  var _useState21 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      _useState22 = _slicedToArray(_useState21, 2),\n      fitRating = _useState22[0],\n      setFitRating = _useState22[1]; // Elements in form\n\n\n  var _useState23 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''),\n      _useState24 = _slicedToArray(_useState23, 2),\n      reviewSum = _useState24[0],\n      setReviewSum = _useState24[1];\n\n  var _useState25 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''),\n      _useState26 = _slicedToArray(_useState25, 2),\n      reviewBody = _useState26[0],\n      setReviewBody = _useState26[1];\n\n  var _useState27 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),\n      _useState28 = _slicedToArray(_useState27, 2),\n      photoUrls = _useState28[0],\n      setPhotoUrls = _useState28[1];\n\n  var _useState29 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''),\n      _useState30 = _slicedToArray(_useState29, 2),\n      nickname = _useState30[0],\n      setNickname = _useState30[1];\n\n  var _useState31 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''),\n      _useState32 = _slicedToArray(_useState31, 2),\n      email = _useState32[0],\n      setEmail = _useState32[1]; // characteristics rating for current product\n\n\n  var characteristics = props.characteristics;\n  var charcs = Object.keys(characteristics);\n  var charcsInfo = {}; // Open/Close Modal\n\n  var toggleModal = function toggleModal() {\n    setProductName(document.getElementById('product-name').innerHTML);\n    setModal(!modal);\n  };\n\n  var validateForm = function validateForm() {\n    // Create a variable to store all ratings for all characteristics\n    var prodExp = {\n      Size: sizeRating,\n      Width: widthRating,\n      Comfort: comfortRating,\n      Quality: qualityRating,\n      Length: lengthRating,\n      Fit: fitRating\n    }; // Construct the characteristics object to pass into the POST request to API\n\n    charcs.forEach(function (charc) {\n      var key = characteristics[charc].id;\n      var value = prodExp[charc];\n      charcsInfo[key] = value;\n    }); // Create a list of missing fields to be included in the alert message\n\n    var missingItems = '';\n\n    if (!overallRating) {\n      missingItems += '- Overall Rating\\n';\n    }\n\n    if (isRecommended === null) {\n      missingItems += '- Do you recommend this product?\\n';\n    }\n\n    for (var i = 0; i < charcs.length; i += 1) {\n      if (!prodExp[charcs[i]]) {\n        missingItems += \"- \".concat(charcs[i], \" Rating\\n\");\n      }\n    }\n\n    if (!reviewBody) {\n      missingItems += '- Review Body\\n';\n    } else if (reviewBody.length < 50) {\n      missingItems += '- Review Body: Minimum 50 characters\\n';\n    }\n\n    if (!nickname) {\n      missingItems += '- Your nickname\\n';\n    }\n\n    if (!email) {\n      missingItems += '- Your email';\n    } else if (email.indexOf('@') === -1) {\n      missingItems += '- Your email: Incorrect email format';\n    }\n\n    return missingItems;\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var missingItems = validateForm();\n\n    if (!missingItems) {\n      var selected = props.selected;\n      axios__WEBPACK_IMPORTED_MODULE_2___default().post('/reviews', {\n        product_id: selected,\n        rating: overallRating,\n        summary: reviewSum,\n        body: reviewBody,\n        recommend: isRecommended,\n        name: nickname,\n        email: email,\n        photos: photoUrls,\n        characteristics: charcsInfo\n      }).then(function () {\n        console.log('Review posted!');\n        var updateRatingReview = props.updateRatingReview;\n        toggleModal();\n        updateRatingReview();\n      })[\"catch\"](function (err) {\n        console.log('Error posting review to API: ', err);\n      });\n    } else {\n      alert(\"You must enter the following:\\n\".concat(missingItems));\n    }\n  };\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", {\n    id: \"add-review-btn\",\n    className: \"review-list-btn\",\n    onClick: toggleModal,\n    type: \"button\"\n  }, \"SUBMIT A REVIEW\"), modal && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"overlay\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"review-form-content\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h2\", null, \"Write Your Review\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h4\", null, \"About the \\xA0\", productName), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"create-review\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"review-form-rating\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null, \"Overall Rating*\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, {\n    fallback: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, \"Loading...\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ReviewStarRating, {\n    name: \"overall\",\n    selections: starSelections,\n    handleChange: function handleChange(num) {\n      setOverallRating(Number(num));\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null, \"Do you recommend this product?*\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"label\", {\n    htmlFor: \"recommend-yes\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n    type: \"radio\",\n    id: \"recommend-yes\",\n    name: \"recommend\",\n    value: \"yes\",\n    onChange: function onChange() {\n      setIsRecommended(true);\n    }\n  }), \"Yes\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"label\", {\n    htmlFor: \"recommend-no\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n    type: \"radio\",\n    id: \"recommend-no\",\n    name: \"recommend\",\n    value: \"no\",\n    onChange: function onChange() {\n      setIsRecommended(false);\n    }\n  }), \"No\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"br\", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null, \"Product Experience*\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, charcs.map(function (charc) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, {\n      fallback: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, \"Loading...\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ReviewCharacteristics, {\n      charc: charc,\n      name: charc,\n      handleChange: function handleChange(num, name) {\n        if (name === 'Size') {\n          setSizeRating(Number(num));\n        } else if (name === 'Width') {\n          setWidthRating(Number(num));\n        } else if (name === 'Comfort') {\n          setComfortRating(Number(num));\n        } else if (name === 'Quality') {\n          setQualityRating(Number(num));\n        } else if (name === 'Length') {\n          setLengthRating(Number(num));\n        } else {\n          setFitRating(Number(num));\n        }\n      }\n    }));\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"review-form-text\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null, \"Review Summary\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"textarea\", {\n    maxLength: \"60\",\n    placeholder: \"Example: Best purchase ever!\",\n    onChange: function onChange(e) {\n      setReviewSum(e.target.value);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null, \"Review Body*\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"textarea\", {\n    maxLength: \"1000\",\n    placeholder: \"Why did you like the product or not?\",\n    onChange: function onChange(e) {\n      setCharCount(e.target.value.length);\n      setReviewBody(e.target.value);\n    },\n    id: \"form-review-body-text\"\n  }), charCount < 50 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", {\n    className: \"form-note\"\n  }, \"Minimum required characters left: \\xA0\", 50 - charCount) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", {\n    className: \"form-note\"\n  }, \"Minimum reached\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, {\n    fallback: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, \"Loading...\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PhotoUpload, {\n    handlePhotoUpload: function handlePhotoUpload(files) {\n      var urls = files.map(function (photo) {\n        return URL.createObjectURL(photo);\n      });\n      setPhotoUrls(urls);\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null, \"Your nickname*\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n    type: \"text\",\n    name: \"new-review-nickname\",\n    id: \"new-review-nickname\",\n    maxLength: \"60\",\n    placeholder: \"Example:jackson11!\",\n    onChange: function onChange(e) {\n      setNickname(e.target.value);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", {\n    className: \"form-note\"\n  }, \"For privacy reasons, do not use your full name or email address\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null, \"Your Email*\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n    name: \"new-review-email\",\n    id: \"new-review-email\",\n    maxLength: \"60\",\n    placeholder: \"Example:jackson11@email.com\",\n    onChange: function onChange(e) {\n      setEmail(e.target.value);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", {\n    className: \"form-note\"\n  }, \"For authentication reasons, you will not be emailed\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", {\n    id: \"form-submit-btn\",\n    type: \"submit\",\n    form: \"create-review\"\n  }, \"Submit\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    role: \"presentation\",\n    id: \"form-close-btn\",\n    onClick: toggleModal\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n    src: \"./static/close.svg\",\n    height: \"20px\",\n    alt: \"right-arrow\"\n  })))));\n};\n\nCreateReviewModal.propTypes = {\n  selected: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().number),\n  characteristics: prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().any)),\n  updateRatingReview: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func)\n};\nCreateReviewModal.defaultProps = {\n  selected: 0,\n  characteristics: {},\n  updateRatingReview: function updateRatingReview() {}\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreateReviewModal); // console.log('overall:', overallRating);\n// console.log('recommend', isRecommended);\n// console.log('size:', sizeRating);\n// console.log('width:', widthRating);\n// console.log('comfort:', comfortRating);\n// console.log('quality:', qualityRating);\n// console.log('length:', lengthRating);\n// console.log('fit:', fitRating);\n// console.log('summary:', reviewSum);\n// console.log('body:', reviewBody);\n// console.log('nickname:', nickname);\n// console.log('email:', email);\n\n//# sourceURL=webpack://fec/./client/src/components/RR/Review/NewReviewModal.jsx?");

/***/ })

}]);